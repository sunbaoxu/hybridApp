webpackJsonp([5],{N5sG:function(t,n,s){"use strict";var e={props:{page:{type:String,default:""},obj:{type:Object,default:function(){return{}}}},methods:{routerFn:function(){"list"==this.page&&"Y"==this.obj.cardSign&&this.$router.push("/bank/userBank")},userBtn:function(t){this.$emit("userBtn",t)}}},a={render:function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"bank-box",on:{click:t.routerFn}},[s("dl",{staticClass:"g-cen-y"},[s("dt",{staticClass:"g-back",style:{"background-image":"url("+t.obj.bankIcon+")"}}),t._v(" "),s("dd",[s("h4",{staticClass:"g-fen-cen"},[s("span",[t._v(t._s(t.obj.bankName))]),t._v(" "),"list"==t.page&&"Y"==t.obj.cardSign&&"B01"==t.obj.bindStatus?s("span",{staticClass:"g-back user",on:{click:function(n){n.stopPropagation(),t.userBtn(t.obj)}}}):"list"==t.page&&"B01"==t.obj.bindStatus?s("span",{staticClass:"g-back no",on:{click:function(n){n.stopPropagation(),t.userBtn(t.obj)}}},[t._v("设为主卡")]):"Y"==t.obj.cardSign?s("span",{staticClass:"g-back user"}):t._e()])])]),t._v(" "),t.obj.async?s("div",{staticClass:"bank-num g-cen-y g-border"},t._l(t.obj.arr,function(n,e){return 2!=e?s("span",{key:e},[t._v(t._s(n))]):s("span",{staticClass:"g-fen-cen"},[s("i"),s("i"),s("i"),s("i")])})):s("div",{staticClass:"bank-num g-cen-y g-border"},t._l(t.obj.arr,function(n,e){return 0==e||1==e?s("span",{key:e},[t._v(t._s(n))]):s("span",{staticClass:"g-fen-cen flex"},[t._v("\n      "+t._s(n[0])),t._m(0),t._v(t._s(n[2])+"\n    ")])})),t._v(" "),"B02"==t.obj.bindStatus?s("p",{staticClass:"text g-cen-y yes"},[s("i"),t._v(" "),""!=t.page?s("router-link",{attrs:{to:"/bank/accountDetails"}},[t._v("华夏银行存管保障中")]):s("span",[t._v("华夏银行存管保障中")])],1):"B01"==t.obj.bindStatus?s("p",{staticClass:"text g-cen-y etc"},[s("i"),t._v(" "),s("span",[t._v("银行存管认证中")])]):"B03"==t.obj.bindStatus?s("p",{staticClass:"text g-cen-y no"},[s("i"),t._v(" "),s("span",[t._v("银行存管尚未认证")])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("span",{staticClass:"g-fen-cen"},[n("i"),n("i"),n("i"),n("i")])}]};var i=s("VU/8")(e,a,!1,function(t){s("r67R")},"data-v-02ff70ec",null);n.a=i.exports},UhBV:function(t,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=s("Dd8w"),a=s.n(e),i=s("P9l9"),o=s("9rMa"),c=s("hgh4"),r=s("N5sG"),u=s("aK0F"),l={name:"bank",components:{bankBox:r.a,alertBack:u.a},data:function(){return{arr:[],input1:"",input2:"",input3:"",input4:"",alertAsync:!1,stateAsync:!1,res:{},bankObj:{}}},methods:a()({},Object(o.b)(["setToastObj","setLodingAsync"]),{userBtn:function(t){this.retryFn(),this.goNextInput(".code-num"),this.bankObj=t},inputFunc:function(){if(""==this.input1||""==this.input2||""==this.input3||""==this.input4)return!1;var t=this.input1+this.input2+this.input3+this.input4,n=this.bankObj.cardNo.replace("****",t),s=c.a.concatObj({cardNo:n,bankType:this.bankObj.bank});this.acountCertified(s)},goNextInput:function(t){for(var n=document.querySelectorAll(t),s=function(t){(a=n[t]).index=t,a.addEventListener("focus",function(){for(var s=0;s<n.length;s++)if(s<t&&""==n[s].value)return void n[s].focus()}),a.addEventListener("keyup",function(){if(8==window.event.keyCode)this["input"+(t+1)]="",t>0&&n[t-1].focus();else{this.value=this.value.replace(/^(.).*$/,"$1");var s=this.index+1;if(s>n.length-1)return;this.value&&n[s].focus()}})},e=0;e<n.length;e++){var a;s(e)}},retryFn:function(){this.input1="",this.input2="",this.input3="",this.input4="",this.alertAsync=!0,this.stateAsync=!1},queryAcountCardList:function(){var t=this,n=c.a.concatObj({});i.a.queryAcountCardList(n).then(function(n){console.log(n),t.setLodingAsync(!1),"000"==n.respCode?(t.arr=n.bankCards,t.arr.map(function(t,n){return 16==t.cardNo.length?(t.async=!0,t.arr=[t.cardNo.substring(0,4),t.cardNo.substring(4,8),t.cardNo.substring(8,12),t.cardNo.substring(12,16)]):(t.async=!1,t.arr=[t.cardNo.substring(0,4),t.cardNo.substring(4,8),[t.cardNo.substring(8,t.cardNo.length-8),t.cardNo.substring(t.cardNo.length-8,t.cardNo.length-4),t.cardNo.substring(t.cardNo.length-4,t.cardNo.length)]])})):t.setToastObj({async:!0,respMesg:n.respMesg})},function(t){console.log(t)})},addBankCard:function(){var t=this;this.setLodingAsync(!0);var n=c.a.concatObj({backUrl:"http://192.168.94.24:8080/bank/changeBank?loginPhone="+c.a.concatObj({}).loginPhone+"&token="+c.a.concatObj({}).token});i.a.addBankCard(n).then(function(n){"000"==n.respCode?(t.setLodingAsync(!1),location.href=n.openUrl):(t.setLodingAsync(!1),t.setToastObj({async:!0,respMesg:n.respMesg}))},function(t){console.log(t)})},openAcount:function(){var t=this;this.setLodingAsync(!0);var n=c.a.concatObj({backUrl:"http://192.168.94.24:8080/bank/changeBank?loginPhone="+c.a.concatObj({}).loginPhone+"&token="+c.a.concatObj({}).token});i.a.openAcount(n).then(function(n){"000"==n.respCode?"1"==n.status?t.queryAcountCardList():"2"==n.status&&(t.setLodingAsync(!1),location.href=n.openUrl):(t.setLodingAsync(!1),t.setToastObj({async:!0,respMesg:n.respMesg}))},function(t){console.log(t)})},acountCertified:function(t){var n=this;this.setLodingAsync(!0),i.a.acountCertified(t).then(function(t){n.setLodingAsync(!1),"000"==t.respCode?(n.alertAsync=!1,n.setToastObj({async:!0,respMesg:"恭喜！银行卡主卡设置成功"})):(console.log(t),n.alertAsync=!1,n.stateAsync=!0)},function(t){console.log(t),n.setLodingAsync(!1),n.alertAsync=!1,n.stateAsync=!0})}}),mounted:function(){this.openAcount()}},p={render:function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"bank-wrap"},[t._m(0),t._v(" "),s("section",{staticClass:"bank-box"},t._l(t.arr,function(n,e){return s("bank-box",{key:e,staticClass:"list-box",attrs:{page:"list",obj:n},on:{userBtn:t.userBtn}})})),t._v(" "),s("section",{staticClass:"add-bank g-fen-cen-box",on:{click:t.addBankCard}},[t._m(1),t._v(" "),t._m(2)]),t._v(" "),s("alert-back",{directives:[{name:"show",rawName:"v-show",value:t.alertAsync,expression:"alertAsync"}],staticClass:"alert-back",on:{closeAlertFn:function(n){t.alertAsync=!1}}},[s("h4",{staticClass:"title g-border"},[t._v("请补充标记为型号的4位数字")]),t._v(" "),s("div",{staticClass:"box"},[s("p",{staticClass:"bank-title"},[t._v(t._s(t.bankObj.cardNo)+" ("+t._s(t.bankObj.bankName)+")")]),t._v(" "),s("p",{staticClass:"text"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.input1,expression:"input1"}],staticClass:"code-num",attrs:{type:"tel",maxlength:"1"},domProps:{value:t.input1},on:{input:[function(n){n.target.composing||(t.input1=n.target.value)},t.inputFunc]}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.input2,expression:"input2"}],staticClass:"code-num",attrs:{type:"tel",maxlength:"1"},domProps:{value:t.input2},on:{input:[function(n){n.target.composing||(t.input2=n.target.value)},t.inputFunc]}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.input3,expression:"input3"}],staticClass:"code-num",attrs:{type:"tel",maxlength:"1"},domProps:{value:t.input3},on:{input:[function(n){n.target.composing||(t.input3=n.target.value)},t.inputFunc]}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.input4,expression:"input4"}],staticClass:"code-num",attrs:{type:"tel",maxlength:"1"},domProps:{value:t.input4},on:{input:[function(n){n.target.composing||(t.input4=n.target.value)},t.inputFunc]}})])])]),t._v(" "),t.stateAsync?s("alert-back",{staticClass:"alert-state-back"},[s("h4",{staticClass:"title g-border"},[t._v("提示")]),t._v(" "),s("div",{staticClass:"box"},[s("p",{staticClass:"bank-title"},[t._v("主卡设置失败！银行卡号码错误")])]),t._v(" "),s("div",{staticClass:"btns g-border1"},[s("button",{on:{click:function(n){t.stateAsync=!1}}},[t._v("放弃")]),t._v(" "),s("button",{on:{click:t.retryFn}},[t._v("重试")])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("section",{staticClass:"remind-box"},[n("p",{staticClass:"icon-box"},[n("i",{staticClass:"iconfont icon-tixing"})]),this._v(" "),n("p",{staticClass:"text-box"},[this._v("您已经开通华夏银行存管账户，并绑定以下银行卡，请选择一张您的常用银行卡，补全银行卡信息进行认证。认证成功的银行卡将作为您的还款银行卡。")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("span",{staticClass:"g-cen-y"},[n("i",{staticClass:"iconfont icon-jia"}),this._v("添加银行卡\n    ")])},function(){var t=this.$createElement,n=this._self._c||t;return n("span",[n("i",{staticClass:"iconfont icon-jiao-rig"})])}]};var d=s("VU/8")(l,p,!1,function(t){s("b//F")},"data-v-54de1e24",null);n.default=d.exports},"b//F":function(t,n){},r67R:function(t,n){}});
//# sourceMappingURL=5.e547e382aa412ef75863.js.map