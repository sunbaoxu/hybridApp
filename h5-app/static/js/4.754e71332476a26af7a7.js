webpackJsonp([4],{N5sG:function(t,n,s){"use strict";var a={props:{obj:{type:Object,default:function(){return{}}}},methods:{routerFn:function(){"Y"==this.obj.cardSign&&this.$router.push("/bank/accountDetails")},userBtn:function(t){this.$emit("userBtn",t)}}},e={render:function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"bank-box",on:{click:t.routerFn}},[s("dl",{staticClass:"g-cen-y"},[s("dt",{staticClass:"g-back",style:{"background-image":"url("+t.obj.bankIcon+")"}}),t._v(" "),s("dd",[s("h4",{staticClass:"g-fen-cen"},[s("span",[t._v(t._s(t.obj.bankName))]),t._v(" "),"Y"==t.obj.cardSign&&"B01"==t.obj.bindStatus?s("span",{staticClass:"g-back user",on:{click:function(n){n.stopPropagation(),t.userBtn(t.obj)}}}):"B01"==t.obj.bindStatus?s("span",{staticClass:"g-back no",on:{click:function(n){n.stopPropagation(),t.userBtn(t.obj)}}},[t._v("设为主卡")]):"Y"==t.obj.cardSign?s("span",{staticClass:"g-back user"}):t._e()])])]),t._v(" "),t.obj.async?s("div",{staticClass:"bank-num g-cen-y g-border"},t._l(t.obj.arr,function(n,a){return 2!=a?s("span",{key:a},[t._v(t._s(n))]):s("span",{staticClass:"g-fen-cen"},[s("i"),s("i"),s("i"),s("i")])})):s("div",{staticClass:"bank-num g-cen-y g-border"},t._l(t.obj.arr,function(n,a){return 0==a||1==a?s("span",{key:a},[t._v(t._s(n))]):s("span",{staticClass:"g-fen-cen flex"},[t._v("\n      "+t._s(n[0])),t._m(0),t._v(t._s(n[2])+"\n    ")])})),t._v(" "),"B02"==t.obj.bindStatus?s("p",{staticClass:"text g-cen-y yes"},[s("i"),t._v(" "),s("span",[t._v("华夏银行存管保障中")])]):"B01"==t.obj.bindStatus?s("p",{staticClass:"text g-cen-y etc"},[s("i"),t._v(" "),s("span",[t._v("银行存管认证中")])]):"B03"==t.obj.bindStatus?s("p",{staticClass:"text g-cen-y no"},[s("i"),t._v(" "),s("span",[t._v("银行存管尚未认证")])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("span",{staticClass:"g-fen-cen"},[n("i"),n("i"),n("i"),n("i")])}]};var i=s("VU/8")(a,e,!1,function(t){s("pOPa")},"data-v-5a5660d8",null);n.a=i.exports},"R3c/":function(t,n){},UhBV:function(t,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=s("Dd8w"),e=s.n(a),i=s("P9l9"),c=s("9rMa"),o=s("hgh4"),r=s("N5sG"),u=s("aK0F"),l={name:"bank",components:{bankBox:r.a,alertBack:u.a},data:function(){return{arr:[],input1:"",input2:"",input3:"",input4:"",alertAsync:!1,stateAsync:!1,bankObj:{}}},methods:e()({},Object(c.b)(["setToastObj","setLodingAsync"]),{userBtn:function(t){this.retryFn(),this.goNextInput(".code-num"),this.bankObj=t},inputFunc:function(){if(""==this.input1||""==this.input2||""==this.input3||""==this.input4)return!1;var t=this.input1+this.input2+this.input3+this.input4,n=this.bankObj.cardNo.replace("****",t),s=o.a.concatObj({cardNo:n,bankType:this.bankObj.bank});this.acountCertified(s)},goNextInput:function(t){for(var n=document.querySelectorAll(t),s=function(t){(e=n[t]).index=t,e.addEventListener("focus",function(){for(var s=0;s<n.length;s++)if(s<t&&""==n[s].value)return void n[s].focus()}),e.addEventListener("keyup",function(){if(8==window.event.keyCode)this["input"+(t+1)]="",t>0&&n[t-1].focus();else{this.value=this.value.replace(/^(.).*$/,"$1");var s=this.index+1;if(s>n.length-1)return;this.value&&n[s].focus()}})},a=0;a<n.length;a++){var e;s(a)}},retryFn:function(){this.input1="",this.input2="",this.input3="",this.input4="",this.alertAsync=!0,this.stateAsync=!1},queryAcountCardList:function(){var t=this,n=o.a.concatObj({});i.a.queryAcountCardList(n).then(function(n){t.setLodingAsync(!1),"000"==n.respCode?(t.arr=n.bankCards,t.arr.map(function(t,n){return 16==t.cardNo.length?(t.async=!0,t.arr=[t.cardNo.substring(0,4),t.cardNo.substring(4,8),t.cardNo.substring(8,12),t.cardNo.substring(12,16)]):(t.async=!1,t.arr=[t.cardNo.substring(0,4),t.cardNo.substring(4,8),[t.cardNo.substring(8,t.cardNo.length-8),t.cardNo.substring(t.cardNo.length-8,t.cardNo.length-4),t.cardNo.substring(t.cardNo.length-4,t.cardNo.length)]])})):t.setToastObj({async:!0,respMesg:n.respMesg})},function(t){console.log(t)})},addBankCard:function(){var t=this;this.setLodingAsync(!0);var n=o.a.concatObj({backUrl:location.origin+"/bank/changeBank?loginPhone="+o.a.concatObj({}).loginPhone+"&token="+o.a.concatObj({}).token});i.a.addBankCard(n).then(function(n){"000"==n.respCode?(t.setLodingAsync(!1),location.href=n.openUrl):(t.setLodingAsync(!1),t.setToastObj({async:!0,respMesg:n.respMesg}))},function(t){console.log(t)})},openAcount:function(){var t=this;this.setLodingAsync(!0);var n=o.a.concatObj({backUrl:"http://192.168.94.24:8080/bank/changeBank?loginPhone="+o.a.concatObj({}).loginPhone+"&token="+o.a.concatObj({}).token});i.a.openAcount(n).then(function(n){"000"==n.respCode?"1"==n.status?t.queryAcountCardList():"2"==n.status&&(t.setLodingAsync(!1),location.href=n.openUrl):(t.setLodingAsync(!1),t.setToastObj({async:!0,respMesg:n.respMesg}))},function(t){console.log(t)})},acountCertified:function(t){var n=this;this.setLodingAsync(!0),i.a.acountCertified(t).then(function(t){"000"==t.respCode?(n.alertAsync=!1,n.setToastObj({async:!0,respMesg:"恭喜！银行卡主卡设置成功"}),n.queryAcountCardList()):(n.setLodingAsync(!1),n.alertAsync=!1,n.stateAsync=!0)},function(t){n.setLodingAsync(!1),n.alertAsync=!1,n.stateAsync=!0})}}),mounted:function(){this.openAcount()}},d={render:function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"bank-wrap"},[t._l(2,function(n,a){return s("section",{key:a,staticClass:"remind-box",class:{"remind-box1":1==a}},[t._m(0,!0),t._v(" "),t.arr.length>0?s("p",{staticClass:"text-box"},[t._v("您已经开通华夏银行存管账户，并绑定以下银行卡，请选择一张您的常用银行卡，补全银行卡信息进行认证。认证成功的银行卡将作为您的还款银行卡。")]):s("p",{staticClass:"text-box"},[t._v("请添加一张您本人名下的常用储蓄卡，并设定为您的主卡。\n目前支持的银行共9家包括：中国银行、工商银行、建设银行、交通银行、中信银行、兴业银行、光大银行、邮政储蓄、广发银行。")])])}),t._v(" "),s("section",{staticClass:"bank-box"},t._l(t.arr,function(n,a){return s("bank-box",{key:a,staticClass:"list-box",attrs:{obj:n},on:{userBtn:t.userBtn}})})),t._v(" "),s("section",{staticClass:"add-bank g-fen-cen-box",on:{click:t.addBankCard}},[t._m(1),t._v(" "),t._m(2)]),t._v(" "),s("alert-back",{directives:[{name:"show",rawName:"v-show",value:t.alertAsync,expression:"alertAsync"}],staticClass:"alert-back",on:{closeAlertFn:function(n){t.alertAsync=!1}}},[s("h4",{staticClass:"title g-border"},[t._v("请补充标记为型号的4位数字")]),t._v(" "),s("div",{staticClass:"box"},[s("p",{staticClass:"bank-title"},[t._v(t._s(t.bankObj.cardNo)+" ("+t._s(t.bankObj.bankName)+")")]),t._v(" "),s("p",{staticClass:"text"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.input1,expression:"input1"}],staticClass:"code-num",attrs:{type:"tel",maxlength:"1"},domProps:{value:t.input1},on:{input:[function(n){n.target.composing||(t.input1=n.target.value)},t.inputFunc]}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.input2,expression:"input2"}],staticClass:"code-num",attrs:{type:"tel",maxlength:"1"},domProps:{value:t.input2},on:{input:[function(n){n.target.composing||(t.input2=n.target.value)},t.inputFunc]}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.input3,expression:"input3"}],staticClass:"code-num",attrs:{type:"tel",maxlength:"1"},domProps:{value:t.input3},on:{input:[function(n){n.target.composing||(t.input3=n.target.value)},t.inputFunc]}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.input4,expression:"input4"}],staticClass:"code-num",attrs:{type:"tel",maxlength:"1"},domProps:{value:t.input4},on:{input:[function(n){n.target.composing||(t.input4=n.target.value)},t.inputFunc]}})])])]),t._v(" "),t.stateAsync?s("alert-back",{staticClass:"alert-state-back"},[s("h4",{staticClass:"title g-border"},[t._v("提示")]),t._v(" "),s("div",{staticClass:"box"},[s("p",{staticClass:"bank-title"},[t._v("主卡设置失败！银行卡号码错误")])]),t._v(" "),s("div",{staticClass:"btns g-border1"},[s("button",{on:{click:function(n){t.stateAsync=!1}}},[t._v("放弃")]),t._v(" "),s("button",{on:{click:t.retryFn}},[t._v("重试")])])]):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("p",{staticClass:"icon-box"},[n("i",{staticClass:"iconfont icon-tixing"})])},function(){var t=this.$createElement,n=this._self._c||t;return n("span",{staticClass:"g-cen-y"},[n("i",{staticClass:"iconfont icon-jia"}),this._v("添加银行卡\n      ")])},function(){var t=this.$createElement,n=this._self._c||t;return n("span",[n("i",{staticClass:"iconfont icon-jiao-rig"})])}]};var p=s("VU/8")(l,d,!1,function(t){s("R3c/")},"data-v-1e6c3e37",null);n.default=p.exports},pOPa:function(t,n){}});
//# sourceMappingURL=4.754e71332476a26af7a7.js.map